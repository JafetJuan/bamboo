TinyCore.AMD.define("charts",[],function(){return{ChartJS:null,aCharts:[],sPathCss:oGlobalSettings.sPathCssUI+"?v="+oGlobalSettings.sHash,aDefaultColors:["96c47f","5b90bf","b55151","b48ead","d6b051","82b2af","d4d659","dcdcdc"],oDefault:{scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:1,barValueSpacing:15,barDatasetSpacing:1,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:0,animateRotate:!0,animateScale:!0,animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!0,maintainAspectRatio:!1,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",onAnimationProgress:function(){},onAnimationComplete:function(){},type:"bar"},hexToRgb:function(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?parseInt(c[1],16)+","+parseInt(c[2],16)+","+parseInt(c[3],16):null},onStart:function(){var a=document.querySelectorAll('[data-tc-modules="charts"]'),b=this;oTools.loadCSS(this.sPathCss),oTools.trackModule("JS_Libraries","call","charts"),require(["chartLibs"],function(c){b.ChartJS=c,$(a).each(function(a){b.autobind(this,a)})})},autobind:function(a,b){""===a.id&&(a.id="canvas-"+Date.now());var c,d,e,f=this,g={type:null!==a.getAttribute("data-tc-type")?a.getAttribute("data-tc-type"):"line"},h=null!==a.getAttribute("data-tc-colors")?oTools.attributeToArray(a.getAttribute("data-tc-colors")):[],i=h.concat(f.aDefaultColors),j=document.getElementById(a.id).getContext("2d");switch(d=oTools.mergeOptions(f.oDefault,g),e=f.getCanvasData(a,f.getColors(i,g.type)),d.type){case"doughnut":d.percentageInnerCutout=50;case"pie":c=f.createChart(j,e.items,d,f.aCharts[b]);break;default:c=f.createChart(j,e.groups,d,f.aCharts[b])}e.legend&&f.createLegend(a,c)},getColors:function(a,b){var c,d=this,e={},f=.5;"line"===b&&(f=.05);for(var g=0;g<a.length;g++)c=d.hexToRgb(a[g]),e[g]={color:"rgba("+c+", 1)",highlight:"rgba("+c+",0.75)",strokeColor:"rgba("+c+",1)",pointColor:"rgba("+c+",1)",pointStrokeColor:"#fff",fillColor:"rgba("+c+","+f+")",highlightFill:"rgba("+c+",0.75)"};return e},getCanvasData:function(a,b){var c,d=$("input[type=hidden]",a),e={groups:{labels:null!==a.getAttribute("data-tc-labels-x")?oTools.attributeToArray(a.getAttribute("data-tc-labels-x")):[],datasets:[]},items:[],legend:!0};return d.each(function(a){c=""!==this.name?this.name:"unlabel","unlabel"===c&&(e.legend=!1),e.groups.datasets[a]=oTools.mergeOptions(e.groups.datasets[a],b[a]),e.groups.datasets[a].data=oTools.attributeToArray(this.value),e.groups.datasets[a].label=c,e.items[a]={value:parseInt(this.value,10),label:c},e.items[a]=oTools.mergeOptions(e.items[a],b[a])}),e},createChart:function(a,b,c,d){var e=this,f=c.type.charAt(0).toUpperCase()+c.type.slice(1);return d=new e.ChartJS(a)[f](b,c)},createLegend:function(a,b){$(a).after(b.generateLegend())},onStop:function(){this.oDefault=null},onDestroy:function(){delete this.oDefault}}});